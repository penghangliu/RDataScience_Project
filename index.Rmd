---
title: "Crime Rates Analysis in New York States, 2016"
author: Penghang Liu
subtitle: First Draft
---

# Introduction
My really awesome and complete introduction will go here.  

> I know words.  I have the best words.  ~ Donald Trump

# Materials and methods
Data Source:

* Crime Rates Data: From [The Division of Criminal Justice Services](https://data.ny.gov/Public-Safety/Index-Violent-Property-and-Firearm-Rates-By-County/34dd-6g2j)

* Gini Index, Education Attainment, Unemployment Rate: From [United States Census Bureau](https://www.census.gov/quickfacts/NY)

Proposed Method:

1. Data Processing: Dowloading data, selecting information of interest, formatting data.

2. Data Visualizaion: Visualizing the distribution of dependent variables(Crime Rates) and independent variables(Gini Index, Education attainment, Unemployment Rate) over 62 counties in NY State.

3. Multiple Regression Model: Building Multiple Regression Model by setting Crime rates as dependent variables and Gini Index, education attainment, unemployment rate as independent variables. The output will provide coefficients of the independent varables, which provide knowledge to evluate the influence of these fators 

## Data
Loading required packages:
```{r, message=F, warning=F}
library(dplyr)
library(sp)
library(maptools)
library(gstat)
library(rgdal)
library(raster)
library(tigris)
library(RColorBrewer)
```

DownLoad Data:
```{r, message=F, warning=F}
#Download Spatial Data using raster package.
us=getData('GADM', country='USA', level=2) #Download US Boundaries
ny<-subset(us,NAME_1=='New York')          #Subset New York state
ny<-subset(ny,NAME_2!='Lake Ontario')      #Remove Ontario Lake
plot(ny)

#Reading Census in the data folder
CensusData <- read.csv("https://raw.githubusercontent.com/penghangliu/RDataScience_Project/master/data/NYCensus2016.csv",stringsAsFactors = FALSE)
#Download Crime data from New York State Gov
CrimeData <- read.csv("https://data.ny.gov/resource/vi5m-jckw.csv",stringsAsFactors = FALSE)
```

Data Wrangling:
```{r, message=F, warning=F}
CrimeData <- filter(CrimeData, year==2016)
CrimeData$county[CrimeData$county=='St Lawrence']<-'Saint Lawrence'

data<-left_join(CrimeData,CensusData,by="county")
data_merge <- geo_join(ny, data, "NAME_2", "county")
```

These are the variables in the data:
```{r}
names(data_merge)
```

Data Visualization:
```{r, message=F, warning=F}
spplot(data_merge["index_rate"], 
       col.regions = brewer.pal(n = 9, name = "OrRd"), 
       cuts = 8, 
       main = "Crime Rates in 2016")

spplot(data_merge["Gini_Index"], 
       col.regions = brewer.pal(n = 9, name = "OrRd"), 
       cuts = 8, 
       main = "Gini Index in 2016")

spplot(data_merge["under_highschool"], 
       col.regions = brewer.pal(n = 9, name = "OrRd"), 
       cuts = 8, 
       main = "Education Attainment (Under Highschool) in 2016")

spplot(data_merge["unemployment"], 
       col.regions = brewer.pal(n = 9, name = "GnBu"), 
       cuts = 8, 
       main = "Unemployment Rates in 2016")
```
# Results

To be continued...

# Conclusions

To be continued...

# References

To be continued...
